<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel Test - Matcha lala</title>
    <meta name="description" content="Admin panel for content management">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="./css/custom.css">
    
    <style>
        .admin-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #f8f9fa, #e3f2fd);
        }
        .admin-card {
            border-radius: 15px;
            border: none;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .content-type-btn {
            transition: all 0.3s ease;
            border-radius: 25px;
        }
        .content-type-btn:hover {
            transform: translateY(-2px);
        }
        .form-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            border: 1px solid #e9ecef;
        }
        .preview-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 1.5rem;
            border: 2px dashed #dee2e6;
        }
        .success-message {
            display: none;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
            <div class="container">
                <a class="navbar-brand d-flex align-items-center" href="index-simple.html">
                    <img src="./images/logo-white.png" alt="Matcha lala Logo" width="40" height="40" class="me-2">
                    <span class="fw-bold text-matcha">Matcha lala Admin</span>
                </a>
                
                <div class="navbar-nav ms-auto">
                    <a class="nav-link" href="article-test.html">
                        <i class="bi bi-arrow-left me-1"></i>Back to Articles
                    </a>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="py-5">
            <div class="container">
                <!-- Header -->
                <div class="row mb-4">
                    <div class="col-12 text-center">
                        <h1 class="display-5 fw-bold mb-3">Admin <span class="text-matcha">Panel</span></h1>
                        <p class="lead">Create and manage your content</p>
                    </div>
                </div>

                <!-- Success Message -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="alert alert-success success-message" id="success-message">
                            <i class="bi bi-check-circle me-2"></i>
                            <span id="success-text">Content added successfully!</span>
                        </div>
                    </div>
                </div>

                <!-- Content Type Selection -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="admin-card card">
                            <div class="card-header bg-matcha text-white">
                                <h5 class="mb-0">
                                    <i class="bi bi-plus-circle me-2"></i>Choose Content Type
                                </h5>
                            </div>
                            <div class="card-body p-4">
                                <div class="d-flex flex-wrap gap-3 justify-content-center">
                                    <button class="btn btn-primary content-type-btn active" data-type="article" onclick="selectContentType('article')">
                                        <i class="bi bi-newspaper me-2"></i>Article
                                    </button>
                                    <button class="btn btn-outline-info content-type-btn" data-type="story" onclick="selectContentType('story')">
                                        <i class="bi bi-book me-2"></i>Story
                                    </button>
                                    <button class="btn btn-outline-success content-type-btn" data-type="tip" onclick="selectContentType('tip')">
                                        <i class="bi bi-lightbulb me-2"></i>Tip
                                    </button>
                                    <button class="btn btn-outline-warning content-type-btn" data-type="menu" onclick="selectContentType('menu')">
                                        <i class="bi bi-cup-hot me-2"></i>Menu Item
                                    </button>
                                    <button class="btn btn-outline-primary content-type-btn" data-type="facebook" onclick="selectContentType('facebook')">
                                        <i class="bi bi-facebook me-2"></i>Facebook Post
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content Forms -->
                <div class="row">
                    <div class="col-lg-8">
                        
                        <!-- Article Form -->
                        <div id="article-form" class="content-form">
                            <div class="form-section">
                                <h4 class="fw-bold mb-4">
                                    <i class="bi bi-newspaper text-primary me-2"></i>Create Article
                                </h4>
                                
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="mb-3">
                                            <label for="articleTitle" class="form-label fw-bold">Article Title</label>
                                            <input type="text" class="form-control form-control-lg" id="articleTitle" 
                                                   placeholder="Enter a compelling article title...">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="articleAuthor" class="form-label fw-bold">Author</label>
                                            <input type="text" class="form-control" id="articleAuthor" 
                                                   placeholder="Author name..." value="Matcha Lala Team">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="mb-3">
                                            <label for="articleSummary" class="form-label fw-bold">Summary</label>
                                            <textarea class="form-control" id="articleSummary" rows="3" 
                                                      placeholder="Brief summary that will appear in the article preview..."></textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="articleReadTime" class="form-label fw-bold">Read Time (minutes)</label>
                                            <input type="number" class="form-control" id="articleReadTime" 
                                                   placeholder="5" min="1" max="60">
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="articleContent" class="form-label fw-bold">Article Content</label>
                                    <textarea class="form-control" id="articleContent" rows="10" 
                                              placeholder="Write your article content here... You can use basic HTML formatting."></textarea>
                                    <small class="text-muted">You can use basic HTML tags like &lt;p&gt;, &lt;strong&gt;, &lt;em&gt;, &lt;ul&gt;, &lt;li&gt;</small>
                                </div>

                                <div class="mb-3">
                                    <label for="articleImage" class="form-label fw-bold">Article Image</label>
                                    <input type="file" class="form-control" id="articleImage" accept="image/*">
                                    <small class="text-muted">Upload a featured image for your article</small>
                                </div>
                            </div>
                        </div>

                        <!-- Story Form -->
                        <div id="story-form" class="content-form" style="display: none;">
                            <div class="form-section">
                                <h4 class="fw-bold mb-4">
                                    <i class="bi bi-book text-info me-2"></i>Share Your Story
                                </h4>
                                
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="mb-3">
                                            <label for="storyTitle" class="form-label fw-bold">Story Title</label>
                                            <input type="text" class="form-control form-control-lg" id="storyTitle" 
                                                   placeholder="What's your story about?">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="storyMood" class="form-label fw-bold">Story Mood</label>
                                            <select class="form-select" id="storyMood">
                                                <option value="inspiring">üåü Inspiring</option>
                                                <option value="heartwarming">üíù Heartwarming</option>
                                                <option value="educational">üìö Educational</option>
                                                <option value="fun">üéâ Fun</option>
                                                <option value="reflective">ü§î Reflective</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="storyContent" class="form-label fw-bold">Your Story</label>
                                    <textarea class="form-control" id="storyContent" rows="8" 
                                              placeholder="Tell your story... What happened? How did it make you feel?"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label for="storyImage" class="form-label fw-bold">Story Image</label>
                                    <input type="file" class="form-control" id="storyImage" accept="image/*">
                                </div>
                            </div>
                        </div>

                        <!-- Tip Form -->
                        <div id="tip-form" class="content-form" style="display: none;">
                            <div class="form-section">
                                <h4 class="fw-bold mb-4">
                                    <i class="bi bi-lightbulb text-success me-2"></i>Share a Helpful Tip
                                </h4>
                                
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="mb-3">
                                            <label for="tipTitle" class="form-label fw-bold">Tip Title</label>
                                            <input type="text" class="form-control form-control-lg" id="tipTitle" 
                                                   placeholder="What's your tip about?">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="tipDifficulty" class="form-label fw-bold">Difficulty Level</label>
                                            <select class="form-select" id="tipDifficulty">
                                                <option value="beginner">üë∂ Beginner</option>
                                                <option value="intermediate">üìà Intermediate</option>
                                                <option value="advanced">üöÄ Advanced</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="tipCategory" class="form-label fw-bold">Tip Category</label>
                                            <select class="form-select" id="tipCategory">
                                                <option value="brewing">üçµ Brewing Technique</option>
                                                <option value="ingredients">üåø Ingredients</option>
                                                <option value="equipment">‚öôÔ∏è Equipment</option>
                                                <option value="storage">üì¶ Storage</option>
                                                <option value="health">üí™ Health Benefits</option>
                                                <option value="general">üìù General</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="tipTime" class="form-label fw-bold">Time Required</label>
                                            <input type="text" class="form-control" id="tipTime" 
                                                   placeholder="e.g., 5 minutes, 1 hour">
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="tipContent" class="form-label fw-bold">Tip Content</label>
                                    <textarea class="form-control" id="tipContent" rows="6" 
                                              placeholder="Share your helpful tip step by step..."></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Menu Form -->
                        <div id="menu-form" class="content-form" style="display: none;">
                            <div class="form-section">
                                <h4 class="fw-bold mb-4">
                                    <i class="bi bi-cup-hot text-warning me-2"></i>Add Menu Item
                                </h4>
                                
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="mb-3">
                                            <label for="menuTitle" class="form-label fw-bold">Item Name</label>
                                            <input type="text" class="form-control form-control-lg" id="menuTitle" 
                                                   placeholder="Enter menu item name...">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="menuPrice" class="form-label fw-bold">Price (‡∏ø)</label>
                                            <input type="number" class="form-control" id="menuPrice" 
                                                   placeholder="0" min="0" step="0.01">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="menuCategory" class="form-label fw-bold">Category</label>
                                            <select class="form-select" id="menuCategory">
                                                <option value="matcha">üçµ Matcha Drinks</option>
                                                <option value="coffee">‚òï Coffee</option>
                                                <option value="tea">ü´ñ Tea</option>
                                                <option value="dessert">üç∞ Desserts</option>
                                                <option value="food">ü•ô Food</option>
                                                <option value="seasonal">üå∏ Seasonal</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="menuTemperature" class="form-label fw-bold">Temperature</label>
                                            <select class="form-select" id="menuTemperature">
                                                <option value="both">üå°Ô∏è Hot & Iced</option>
                                                <option value="hot">üî• Hot Only</option>
                                                <option value="iced">üßä Iced Only</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="menuDescription" class="form-label fw-bold">Description</label>
                                    <textarea class="form-control" id="menuDescription" rows="4" 
                                              placeholder="Describe the taste, ingredients, or special features..."></textarea>
                                </div>

                                <div class="mb-3">
                                    <label for="menuImage" class="form-label fw-bold">Menu Item Image</label>
                                    <input type="file" class="form-control" id="menuImage" accept="image/*">
                                </div>
                            </div>
                        </div>

                        <!-- Facebook Form -->
                        <div id="facebook-form" class="content-form" style="display: none;">
                            <div class="form-section">
                                <h4 class="fw-bold mb-4">
                                    <i class="bi bi-facebook text-primary me-2"></i>Embed Facebook Post
                                </h4>
                                
                                <div class="mb-3">
                                    <label for="embedCode" class="form-label fw-bold">Facebook Embed Code</label>
                                    <textarea class="form-control" id="embedCode" rows="6" 
                                              placeholder="Paste your Facebook iframe embed code here..."></textarea>
                                    <small class="text-muted">
                                        <strong>How to get embed code:</strong><br>
                                        1. Go to your Facebook post<br>
                                        2. Click the three dots (...) menu<br>
                                        3. Select "Embed"<br>
                                        4. Copy the iframe code and paste it here
                                    </small>
                                </div>
                            </div>
                        </div>

                        <!-- Common Tags Section -->
                        <div class="form-section">
                            <h5 class="fw-bold mb-3">
                                <i class="bi bi-tags me-2"></i>Tags & Categories
                            </h5>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="mainTag" class="form-label fw-bold">Main Category</label>
                                        <select class="form-select" id="mainTag">
                                            <option value="">Select main category...</option>
                                            <option value="story">Story</option>
                                            <option value="tip">Tip</option>
                                            <option value="article">Article</option>
                                            <option value="menu">Menu</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="subTags" class="form-label fw-bold">Sub Categories</label>
                                        <input type="text" class="form-control" id="subTags" 
                                               placeholder="e.g., matchalala, behind-scenes, promotion">
                                        <small class="text-muted">Separate multiple tags with commas</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-flex gap-3 justify-content-center">
                            <button class="btn btn-matcha btn-lg" onclick="saveContent()">
                                <i class="bi bi-check-circle me-2"></i>Save Content
                            </button>
                            <button class="btn btn-outline-secondary btn-lg" onclick="clearForm()">
                                <i class="bi bi-arrow-clockwise me-2"></i>Clear Form
                            </button>
                            <a href="article-test.html" class="btn btn-outline-matcha btn-lg">
                                <i class="bi bi-eye me-2"></i>View Articles
                            </a>
                        </div>
                    </div>

                    <!-- Preview Section -->
                    <div class="col-lg-4">
                        <div class="preview-section sticky-top" style="top: 20px;">
                            <h5 class="fw-bold mb-3">
                                <i class="bi bi-eye me-2"></i>Live Preview
                            </h5>
                            <div id="preview-content">
                                <p class="text-muted text-center">
                                    <i class="bi bi-info-circle me-2"></i>
                                    Fill out the form to see a preview of your content
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script>
        let currentContentType = 'article';
        let articles = JSON.parse(localStorage.getItem('matchaArticles')) || [];

        // Content type selection
        function selectContentType(type) {
            currentContentType = type;
            
            // Update active button
            document.querySelectorAll('.content-type-btn').forEach(btn => {
                btn.classList.remove('active');
                btn.classList.add('btn-outline-primary', 'btn-outline-info', 'btn-outline-success', 'btn-outline-warning');
                if (btn.dataset.type === 'article') btn.classList.remove('btn-outline-primary');
                if (btn.dataset.type === 'story') btn.classList.remove('btn-outline-info');
                if (btn.dataset.type === 'tip') btn.classList.remove('btn-outline-success');
                if (btn.dataset.type === 'menu') btn.classList.remove('btn-outline-warning');
                if (btn.dataset.type === 'facebook') btn.classList.remove('btn-outline-primary');
            });
            
            const activeBtn = document.querySelector(`[data-type="${type}"]`);
            activeBtn.classList.add('active');
            activeBtn.classList.remove('btn-outline-primary', 'btn-outline-info', 'btn-outline-success', 'btn-outline-warning');
            
            if (type === 'article') activeBtn.classList.add('btn-primary');
            if (type === 'story') activeBtn.classList.add('btn-info');
            if (type === 'tip') activeBtn.classList.add('btn-success');
            if (type === 'menu') activeBtn.classList.add('btn-warning');
            if (type === 'facebook') activeBtn.classList.add('btn-primary');
            
            // Show/hide forms
            document.querySelectorAll('.content-form').forEach(form => form.style.display = 'none');
            document.getElementById(`${type}-form`).style.display = 'block';
            
            // Auto-select main tag
            const mainTagSelect = document.getElementById('mainTag');
            if (type !== 'facebook') {
                mainTagSelect.value = type;
            }

            // Update preview
            updatePreview();
        }

        // Live preview update
        function updatePreview() {
            const preview = document.getElementById('preview-content');
            
            if (currentContentType === 'article') {
                const title = document.getElementById('articleTitle').value;
                const author = document.getElementById('articleAuthor').value;
                const summary = document.getElementById('articleSummary').value;
                
                if (title || author || summary) {
                    preview.innerHTML = `
                        <div class="card border-0 shadow-sm">
                            <div class="card-body">
                                <div class="mb-2">
                                    <span class="badge bg-info">Article</span>
                                </div>
                                <h6 class="card-title fw-bold">${title || 'Article Title'}</h6>
                                <p class="card-text small text-muted">
                                    ${summary || 'Article summary will appear here...'}
                                </p>
                                <small class="text-muted">
                                    <i class="bi bi-person me-1"></i>${author || 'Author'}
                                </small>
                            </div>
                        </div>
                    `;
                } else {
                    preview.innerHTML = '<p class="text-muted text-center"><i class="bi bi-info-circle me-2"></i>Fill out the form to see a preview</p>';
                }
            }
            // Add other content type previews as needed
        }

        // Save content
        function saveContent() {
            const newArticle = {
                id: Date.now(),
                type: currentContentType,
                mainTag: document.getElementById('mainTag').value || currentContentType,
                subTags: document.getElementById('subTags').value.split(',').map(tag => tag.trim()).filter(tag => tag),
                date: new Date().toISOString()
            };

            // Get type-specific data
            if (currentContentType === 'article') {
                newArticle.title = document.getElementById('articleTitle').value;
                newArticle.author = document.getElementById('articleAuthor').value;
                newArticle.summary = document.getElementById('articleSummary').value;
                newArticle.content = document.getElementById('articleContent').value;
                newArticle.readTime = document.getElementById('articleReadTime').value;
                
                // Handle image file
                const imageFile = document.getElementById('articleImage').files[0];
                if (imageFile) {
                    newArticle.image = URL.createObjectURL(imageFile);
                }
                
            } else if (currentContentType === 'story') {
                newArticle.title = document.getElementById('storyTitle').value;
                newArticle.content = document.getElementById('storyContent').value;
                newArticle.mood = document.getElementById('storyMood').value;
                
                const imageFile = document.getElementById('storyImage').files[0];
                if (imageFile) {
                    newArticle.image = URL.createObjectURL(imageFile);
                }
                
            } else if (currentContentType === 'tip') {
                newArticle.title = document.getElementById('tipTitle').value;
                newArticle.content = document.getElementById('tipContent').value;
                newArticle.difficulty = document.getElementById('tipDifficulty').value;
                newArticle.category = document.getElementById('tipCategory').value;
                newArticle.timeRequired = document.getElementById('tipTime').value;
                
            } else if (currentContentType === 'menu') {
                newArticle.title = document.getElementById('menuTitle').value;
                newArticle.content = document.getElementById('menuDescription').value;
                newArticle.price = document.getElementById('menuPrice').value;
                newArticle.category = document.getElementById('menuCategory').value;
                newArticle.temperature = document.getElementById('menuTemperature').value;
                
                const imageFile = document.getElementById('menuImage').files[0];
                if (imageFile) {
                    newArticle.image = URL.createObjectURL(imageFile);
                }
                
            } else if (currentContentType === 'facebook') {
                newArticle.embed = document.getElementById('embedCode').value;
            }

            // Validate required fields
            if (!newArticle.title && currentContentType !== 'facebook') {
                alert('Please enter a title for your content.');
                return;
            }

            if (!newArticle.content && !newArticle.embed) {
                alert('Please enter content or embed code.');
                return;
            }

            // Save to storage
            articles.push(newArticle);
            localStorage.setItem('matchaArticles', JSON.stringify(articles));

            // Show success message
            showSuccessMessage(`${currentContentType.charAt(0).toUpperCase() + currentContentType.slice(1)} added successfully!`);

            // Clear form
            clearForm();
        }

        function clearForm() {
            document.querySelectorAll('input, textarea, select').forEach(field => {
                if (field.id !== 'articleAuthor') { // Keep default author
                    field.value = '';
                }
            });
            updatePreview();
        }

        function showSuccessMessage(message) {
            const successDiv = document.getElementById('success-message');
            const successText = document.getElementById('success-text');
            successText.textContent = message;
            successDiv.style.display = 'block';
            
            // Auto hide after 3 seconds
            setTimeout(() => {
                successDiv.style.display = 'none';
            }, 3000);
        }

        // Set up event listeners for live preview
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listeners to form fields for live preview
            document.addEventListener('input', updatePreview);
            
            // Initialize
            selectContentType('article');
        });
    </script>
</body>
</html>